# 小説リーダーWebアプリケーション 設計計画

## 概要
Turn.jsを利用して、PDFファイルをページめくり形式で読むことができるWebアプリケーション。認証済みユーザーが小説を投稿し、タグ付けすることで、ジャンルやAI生成の有無などを明確にできる。未認証ユーザーは閲覧のみ可能。

## 技術スタック

### フロントエンド
- Next.js + TypeScript
- Turn.js（ページめくりエフェクト）
- TailwindCSS（スタイリング）
- Zustand（状態管理）

### バックエンド/インフラ
- Vercel（ホスティング）
- Supabase
  - PostgreSQL（データベース）
  - Storage（ファイルストレージ）
  - Auth（認証）

### ユーティリティ
- pdf.js（PDF解析）
- zod（バリデーション）

## 主要機能

### 1. 認証システム
- Supabase Authを利用した堅牢な認証
- メールアドレス認証
- セッション管理の自動化
- ログアウト機能

### 2. 小説管理
- 認証済みユーザーのみPDFアップロード可能
- メタデータ入力（タイトル、説明、タグ）
- 作成者による編集・削除機能

### 3. タグシステム
- プリセットタグの用意（ジャンル、AI生成フラグなど）
- タグによる絞り込み機能
- タグクラウドの表示

### 4. 閲覧機能
- 未認証ユーザーでも利用可能
- Turn.jsによるページめくり表示
- ズーム機能
- モバイル対応レイアウト

### 5. インタラクション機能
- 認証済みユーザーのみいいね可能
- いいね数による並び替え
- 新着順での並び替え

## 開発フェーズ

### フェーズ1: 認証システムとプロジェクトセットアップ（1週間）
1. プロジェクトセットアップ
   - Next.js + TypeScript
   - Supabase（Auth/DB/Storage）連携
   - TailwindCSS設定
2. 認証システム実装
   - Supabase Auth設定
   - メール認証の有効化
   - 認証UI実装（Supabase Auth UI）
   - 認証状態管理の実装

### フェーズ2: 基本機能実装（2週間）
1. PDFアップロード機能
   - Supabase Storage設定
   - PDFファイル形式チェック
   - PDF解析とページ数取得
2. 基本的なビューワー実装
   - Turn.js統合
   - ページめくり機能
   - レスポンシブデザイン

### フェーズ3: タグシステム（1週間）
1. タグ管理機能
   - タグの作成・管理
   - タグ付け機能
2. 絞り込み機能
   - タグベースのフィルタリング
   - UI/UX実装

### フェーズ4: インタラクションと最適化（1週間）
1. いいね機能
   - 認証ユーザー用いいねシステム
   - リアルタイム更新
2. 最適化
   - パフォーマンス改善
   - エラーハンドリング
   - UI/UXの改善

## 非機能要件

### パフォーマンス
- ページロード時間: 2秒以内
- ファイルアップロード: 20秒以内
- First Contentful Paint: 1.5秒以内

### セキュリティ
- Supabase Authによる堅牢な認証
- 各種認証プロバイダーのセキュリティ基準に準拠
- PDFファイルのバリデーション
- ファイルサイズの制限（最大10MB）
- レート制限

### スケーラビリティ
- Vercelの自動スケーリング活用
- Supabaseのパフォーマンス階層で対応

## 将来の拡張性
- ソーシャル認証（Google, Twitter等）の追加
- コメント機能
- SNSシェア機能
- アクセス解析
- Wordファイルのサポート追加